@page "/wse"
@using Models

<PageTitle>Atria - WseName</PageTitle>

<div class="container-xxl mt-4">

    @if (isCollab)
    {
        <div class="d-grid gap-2 mt-4 mb-4 d-flex justify-content-end">
            <button class="btn btn-success" type="button" @onclick="() => OpenDeleteWSEDialog()">
                Bearbeiten
            </button>
            <button class="btn btn-danger" type="button">
                Löschen
            </button>
        </div>
    }

    @*------------HEADER CARD------------*@
    <div class="card mb-4">
        <div class="card-body">
            <div class="row mb-2">
                <div class="col-auto mt-sm-1">
                    <i class="fa-solid fa-circle text-success"/>
                </div>
                <div class="col ps-0">
                    <h3 class="card-title fw-bold">
                        Name
                    </h3>
                </div>
                <div class="col-auto d-flex align-content-end">
                    <h5><a class="fa-solid fa-arrow-up-right-from-square text-decoration-none" title="Zur Webservice" href=""/></h5>
                </div>
            </div>
            <h5 class="card-subtitle mb-2 text-muted">
                Ansprechpartner
                <button class="btn btn-outline-secondary btn-small" @onclick="() => OpenCollabDialog()">weitere Kollaboratoren</button>
            </h5>
            <div class="card-text">Kurzbeschreibung</div>
        </div>
    </div>

    <div class="row mb-4">
        @*------------REVIEW AND TAGS------------*@
        <div class="col-md-3 mb-4">
            <div class="card mb-4">
                <div class="card-body">
                    <h6 class="card-title fw-bold">Bewertung</h6>
                    <div class="row">
                        <div class="col-auto">
                            <i class="fa fa-star rating-color"/>
                            <i class="fa fa-star rating-color"/>
                            <i class="fa fa-star rating-color"/>
                            <i class="fa fa-star rating-color"/>
                            <i class="fa fa-star rating-color"/>
                        </div>
                        <div class="col-auto">
                            <p>xx Bewertungen</p>
                        </div>
                    </div>
                    <div class="d-grid d-flex justify-content-end">
                        <button class="btn btn-outline-secondary btn-small" type="button">zu den Bewertungen</button>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <h6 class="card-title fw-bold">Tags</h6>
                    @*mock tags*@
                    <div class="card-text">
                        @for (int i = 0; i <= 20; i++) {
                            <div class="badge bg-info me-1" value="@i">Tag @i</div>
                        }
                    </div>
                </div>
            </div>
        </div>

        @*------------LOG, DOC, DESC.------------*@
        <div class="col-md-9">

            <div class="card mb-4">
                <h6 class="card-header fw-bold">Änderungshistorie</h6>
                <div class="card-body">
                    <div class="card-text">This is some text within a card body.</div>
                </div>
            </div>
    
            <div class="card mb-4">
                <h6 class="card-header fw-bold">
                    Dokumentation
                    <a class="fa-solid fa-arrow-up-right-from-square text-decoration-none" title="Zur Dokumetation"/>
                </h6>
                <div class="card-body">
                    <div class="card-text">This is some text within a card body.</div>
                </div>
            </div>

            <div class="card">
                <h6 class="card-header fw-bold">Volltextbeschreibung</h6>
                <div class="card-body">
                    <div class="card-text">This is some text within a card body.</div>
                </div>
            </div>
        </div>
    </div>

    <hr/>

    @*------------QNA------------*@
    <h6 class="fw-bold mt-2 mb-2">Q&A</h6>

    @if (isLoggedIn)
    {
        <textarea class="form-control mt-4 mb-2" type="text" placeholder="Haben Sie eine Frage?"/>
        <div class="d-grid gap-2 mt-2 mb-4 d-flex justify-content-end">
            <button class="btn btn-outline-success btn-small" type="button">
                Absenden
            </button>
        </div>
    }
    
    @*foreach question*@
    <div class="card mt-4 mb-4">
        <div class="card-header">
            <div class="row">
                <div class="col-auto">
                    <h6 class="fw-bold mt-1">Frage:</h6>
                </div>
                <div class="col">
                    <h6 class="fw-bold mt-1 mb-1">
                        Creator
                        <small class="text-muted">Date</small>
                    </h6>
                    Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.
                </div>
            </div>
            @if (isLoggedIn)
            {
                <div class="d-grid gap-2 mt-2 mb-2 d-flex justify-content-end">
                    <button class="btn btn-outline-success btn-small" type="button">
                        Antworten
                    </button>
                    @if (isCreator)
                    {
                        <button class="btn btn-outline-danger btn-small" type="button" @onclick="() => OpenDeleteQuestionDialog()">
                            Löschen
                        </button>
                    }
                </div>
            }
        </div>
        @*if answers exist*@
        <ul class="list-group list-group-flush">
            @*foreach answer*@
            <li class="list-group-item">
                <div class="row">
                    <div class="col-auto">
                        <h6 class="fw-bold mt-1">Antwort:</h6>
                    </div>
                    <div class="col">
                        <h6 class="fw-bold mt-1 mb-1">
                            Creator
                            <small class="text-muted">Date</small>
                        </h6>
                        Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.
                    </div>
                </div>
                <div class="d-grid gap-2 mt-2 mb-2 d-flex justify-content-end">
                    <button class="btn btn-outline-danger btn-small" type="button" @onclick="() => OpenDeleteAnswerDialog()">
                        Löschen
                    </button>
                </div>
            </li>
        </ul>
    </div>

    @*if more questions exist*@
    <div class="d-grid d-flex mt-2 mb-4 justify-content-center">
        <button class="btn btn-outline-secondary btn-small" type="button" href="">weitere Fragen</button>
    </div>

    <hr/>

    @*------------REVIEWS------------*@
    <div class="row mb-2">
        <div class="col-auto">
            <h6 class="fw-bold">Bewertungen</h6>
        </div>
        @if (isLoggedIn)
        {
            <div class="col-auto">
                <button class="btn btn-outline-success btn-small" type="button" href="">neue Bewertung</button>
            </div>
        }
        <div class="col-auto ms-auto">
            <div class="dropdown">
                <a class="btn btn-outline-secondary btn-small dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                    Sortieren nach
                </a>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item" href="#">Neuste</a></li>
                    <li><a class="dropdown-item" href="#">Älteste</a></li>
                    <li><a class="dropdown-item" href="#">Absteigend</a></li>
                    <li><a class="dropdown-item" href="#">Aufsteigend</a></li>
                </ul>
            </div>
        </div>
    </div>
    
    @*foreach review*@
    <div class="card mt-3 mb-4">
        <div class="card-body">
            <div class="row">
                <div class="col-auto">
                    <i class="fa fa-star rating-color"></i>
                    <i class="fa fa-star rating-color"></i>
                    <i class="fa fa-star rating-color"></i>
                    <i class="fa fa-star rating-color"></i>
                    <i class="fa fa-star rating-uncolored"></i>
                    <div class="card-subtitle mt-1 text-muted">Date</div>
                </div>
                <div class="col mt-1">
                    <h6 class="card-title fw-bold">Title</h6>
                    <div class="card-subtitle mb-2 text-muted">Creator</div>
                    <p class="card-text">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.</p>
                </div>
            </div>
            @if (isCreator) 
            {
                <div class="d-grid gap-2 mt-2 d-flex justify-content-end">
                    <button class="btn btn-outline-success btn-small" type="button">
                        Bearbeiten
                    </button>
                    <button class="btn btn-outline-danger btn-small" type="button" @onclick="() => OpenDeleteReviewDialog()">
                        Löschen
                    </button>
                </div>
            }
        </div>
    </div>

    @*if more reviews exist*@
    <div class="d-grid d-flex mt-2 mb-2 justify-content-center">
        <button class="btn btn-outline-secondary btn-small" type="button" href="">weitere Bewertungen</button>
    </div>
    
    @if (isCollab)
    {
        <div class="d-grid gap-2 mt-4 mb-4 d-flex justify-content-end">
            <button class="btn btn-success" type="button">
                Bearbeiten
            </button>
            <button class="btn btn-danger" type="button" @onclick="() => OpenDeleteWSEDialog()">
                Löschen
            </button>
        </div>
    }
    
</div>

@if (CollabDialogOpen) 
{
    <Frontend.Pages.Components.CollabModal OnClose="@OnCollabDialogClose"/>
}

@if (DeleteQuestionDialogOpen) 
{
    <Frontend.Pages.Components.DeleteModal Title="Frage löschen" Text="Sind Sie sicher, dass Sie Ihre Frage löschen möchten?" OnClose="@OnDeleteQuestionDialogClose"/>
}

@if (DeleteAnswerDialogOpen) 
{
    <Frontend.Pages.Components.DeleteModal Title="Antwort löschen" Text="Sind Sie sicher, dass Sie Ihre Antwort löschen möchten?" OnClose="@OnDeleteAnswerDialogClose"/>
}

@if (DeleteReviewDialogOpen) 
{
    <Frontend.Pages.Components.DeleteModal Title="Bewertung löschen" Text="Sind Sie sicher, dass Sie Ihre Bewertung löschen möchten?" OnClose="@OnDeleteReviewDialogClose"/>
}

@if (DeleteWSEDialogOpen) 
{
    <Frontend.Pages.Components.DeleteModal Title="Eintrag löschen" Text="Sind Sie sicher, dass Sie Ihr Eintrag löschen möchten?" OnClose="@OnDeleteWSEDialogClose"/>
}

@code {
    public bool CollabDialogOpen { get; set; }
    public bool DeleteQuestionDialogOpen { get; set; }
    public bool DeleteAnswerDialogOpen { get; set; }
    public bool DeleteReviewDialogOpen { get; set; }
    public bool DeleteWSEDialogOpen { get; set; }
    public bool isLoggedIn = true;
    public bool isCollab = true;
    public bool isCreator = true;

    private void OpenCollabDialog()
    {
        CollabDialogOpen = true;
        StateHasChanged();
    }

    private void OnCollabDialogClose(bool accepted)
    {
        CollabDialogOpen = false;
        StateHasChanged();
    }

    private void OpenDeleteQuestionDialog()
    {
        DeleteQuestionDialogOpen = true;
        StateHasChanged();
    }

    private void OnDeleteQuestionDialogClose(bool accepted)
    {
        DeleteQuestionDialogOpen = false;
        StateHasChanged();
    }

    private void OpenDeleteAnswerDialog()
    {
        DeleteAnswerDialogOpen = true;
        StateHasChanged();
    }

    private void OnDeleteAnswerDialogClose(bool accepted)
    {
        DeleteAnswerDialogOpen = false;
        StateHasChanged();
    }

    private void OpenDeleteReviewDialog()
    {
        DeleteReviewDialogOpen = true;
        StateHasChanged();
    }

    private void OnDeleteReviewDialogClose(bool accepted)
    {
        DeleteReviewDialogOpen = false;
        StateHasChanged();
    }

    private void OpenDeleteWSEDialog()
    {
        DeleteWSEDialogOpen = true;
        StateHasChanged();
    }

    private void OnDeleteWSEDialogClose(bool accepted)
    {
        DeleteWSEDialogOpen = false;
        StateHasChanged();
    }
}
