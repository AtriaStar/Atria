@page "/wse"
@using Models

<PageTitle>Atria - WseName</PageTitle>

<div class="container-xxl mt-4">

    <div class="card mb-4">
        <div class="card-body">
            <div class="row mb-2">
                <div class="col-auto mt-sm-1">
                    <i class="fa-solid fa-circle text-success"/>
                </div>
                <div class="col ps-0">
                    <h3 class="card-title fw-bold">
                        Name
                    </h3>
                </div>
                <div class="col-auto d-flex align-content-end">
                    <h5><a class="fa-solid fa-arrow-up-right-from-square text-decoration-none" title="Zur Webservice" href=""/></h5>
                </div>
            </div>
            <h5 class="card-subtitle mb-2 text-muted">
                Ansprechpartner
                <a class="card-link fs-6" @onclick="() => OpenCollabDialog()">Kollaboratoren</a>
            </h5>
            <div class="card-text">Kurzbeschreibung</div>
        </div>
    </div>

    <div class="row mb-4">

        <div class="col-md-3 mb-4">

            <div class="card mb-4">
                <div class="card-body">
                    <h6 class="card-title fw-bold">Bewertung</h6>
                    <div class="card-text">
                        <div class="row">
                            <div class="col-auto">
                                <i class="fa fa-star rating-color"/>
                                <i class="fa fa-star rating-color"/>
                                <i class="fa fa-star rating-color"/>
                                <i class="fa fa-star rating-color"/>
                                <i class="fa fa-star rating-color"/>
                            </div>
                            <div class="col-auto">
                                <p>11 Bewrtungen</p>
                            </div>
                        </div>
                        <p>zu den Bewertungen</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <h6 class="card-title fw-bold">Tags</h6>
                    @*mock tags*@
                    <div class="card-text">
                        @for (int i = 0; i <= 20; i++) {
                            <div class="badge bg-info me-1" value="@i">Tag @i</div>
                        }
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-9">

            <div class="card mb-4">
                <h6 class="card-header fw-bold">Änderungshistorie</h6>
                <div class="card-body">
                    <div class="card-text">This is some text within a card body.</div>
                </div>
            </div>
    
            <div class="card mb-4">
                <h6 class="card-header fw-bold">
                    Dokumentation
                    <a class="fa-solid fa-arrow-up-right-from-square text-decoration-none" title="Zur Dokumetation"/>
                </h6>
                <div class="card-body">
                    <div class="card-text">This is some text within a card body.</div>
                </div>
            </div>

            <div class="card">
                <h6 class="card-header fw-bold">Volltextbeschreibung</h6>
                <div class="card-body">
                    <div class="card-text">This is some text within a card body.</div>
                </div>
            </div>
        </div>
    </div>

    <hr/>

    <h6 class="fw-bold">Q&A</h6>

    <hr/>

    <div class="row">
        <div class="col-auto">
            <h6 class="fw-bold">Bewertungen</h6>
        </div>
        <div class="col-auto">
            <button class="btn btn-outline-success btn-small" type="button" href="">neue Bewertung</button>
        </div>
        <div class="col-auto ms-auto">
            <div class="dropdown">
                <a class="btn btn-outline-secondary btn-small dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                    Sortieren nach
                </a>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item" href="#">Neuste</a></li>
                    <li><a class="dropdown-item" href="#">Älteste</a></li>
                    <li><a class="dropdown-item" href="#">Absteigend</a></li>
                    <li><a class="dropdown-item" href="#">Aufsteigend</a></li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="card mt-3 mb-4">
        <div class="card-body">
            <div class="row">
                <div class="col-auto">
                    <i class="fa fa-star rating-color"></i>
                    <i class="fa fa-star rating-color"></i>
                    <i class="fa fa-star rating-color"></i>
                    <i class="fa fa-star rating-color"></i>
                    <i class="fa fa-star rating-uncolored"></i>
                    <div class="card-subtitle mt-1 text-muted">Date</div>
                </div>
                <div class="col mt-1">
                    <h6 class="card-title fw-bold">Title</h6>
                    <div class="card-subtitle mb-2 text-muted">Creator</div>
                    <p class="card-text">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.</p>
                </div>
            </div>
            @if (isCreator) 
            {
                <div class="d-grid gap-2 mt-2 d-flex justify-content-end">
                    <button class="btn btn-outline-success btn-small" type="button">
                        Bearbeiten
                    </button>
                    <button class="btn btn-outline-danger btn-small" type="button">
                        Löschen
                    </button>
                </div>
            }
        </div>
    </div>

    <div class="d-grid d-flex mt-2 mb-2 justify-content-center">
        <button class="btn btn-outline-secondary btn-small" type="button" href="">weitere Bewertungen</button>
    </div>
    
    @if (isCollab)
    {
        <div class="d-grid gap-2 mt-4 mb-4 d-flex justify-content-end">
            <button class="btn btn-success" type="button">
                Bearbeiten
            </button>
            <button class="btn btn-danger" type="button">
                Löschen
            </button>
        </div>
    }
    
</div>

@if (CollabDialogOpen) 
{
    <Frontend.Pages.Components.CollabModal OnClose="@OnCollabDialogClose"></Frontend.Pages.Components.CollabModal>
}

@code {
    public bool CollabDialogOpen { get; set; }
    public bool isCollab = true;
    public bool isCreator = true;

    private void OpenCollabDialog()
    {
        CollabDialogOpen = true;
        StateHasChanged();
    }

    private void OnCollabDialogClose(bool accepted)
    {
        CollabDialogOpen = false;
        StateHasChanged();
    }

}
